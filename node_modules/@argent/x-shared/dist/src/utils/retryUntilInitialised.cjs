"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const a=require("async-retry"),o=require("./schemas.cjs");async function u(n,i,s={retries:5,minTimeout:5e3}){return a(async e=>{let t=null;try{t=await n()}catch{return e(new Error("Error fetching")),null}const r=o.safeParseAndWarn(i,t);if(!r.success)return e(new Error("Error parsing response")),null;if(r.data.status!=="initialised")throw new Error("Not initialised yet");return r.data},s)}exports.retryUntilInitialised=u;
